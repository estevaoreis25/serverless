generator client {
  provider = "prisma-client-js"
  output   = "../src/generated/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Define your models
model Reviewer {
  id                 Int      @id @default(autoincrement())
  externalReviewerId String?  @unique
  name               String?
  reviews            Review[]
  createdAt          DateTime @default(now())
  updatedAt          DateTime @updatedAt
}

model Company {
  id            Int      @id @default(autoincrement())
  placeId       String   @unique
  name          String
  postalCode    String?
  address       String?
  phone         String?
  totalScore    Float    @default(0.0)
  googleMapsUrl String?
  oneStars      Int?
  twoStars      Int?
  threeStars    Int?
  fourStars     Int?
  fiveStars     Int?
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  reviews       Review[]
}

model Review {
  id                   Int       @id @default(autoincrement())
  externalReviewId     String?   @unique
  reviewUrl            String?
  stars                Int
  content              String?
  responseOwnerContent String?
  likesCount           Int       @default(0)
  reviewer             Reviewer? @relation(fields: [reviewerId], references: [id])
  reviewerId           Int?
  company              Company?  @relation(fields: [companyId], references: [id])
  companyId            Int?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  publishedAt          DateTime
}
